import{r as o,u as D,e as A,j as e,k as n,c as k,V as C,b as q}from"./index-76169fad.js";import{l as Q}from"./listings-af106268.js";import{I as O}from"./ImageUpload-95b88665.js";import{C as P}from"./CheckCircleIcon-077107a6.js";import{P as H}from"./PhotoIcon-c505ca73.js";import{M as R}from"./MapPinIcon-dea18e68.js";function $({title:m,titleId:c,...d},l){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":c},d),m?o.createElement("title",{id:c},m):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const G=o.forwardRef($),U=G;function W({title:m,titleId:c,...d},l){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":c},d),m?o.createElement("title",{id:c},m):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"}))}const Y=o.forwardRef(W),Z=Y,se=()=>{const{user:m,isHost:c}=D(),d=A(),[l,h]=o.useState(1),[y,b]=o.useState(!1),[s,x]=o.useState({title:"",description:"",category:"",customCategory:"",basePrice:"",unitType:"day",depositType:"percent",depositValue:"20",totalQuantity:"1",location:"",images:[],availability:{alwaysAvailable:!0,customSchedule:[]},policies:{cancellationPolicy:"moderate",minimumBookingPeriod:"1",maximumBookingPeriod:"30",instantBooking:!1},features:[],customFeatures:[]}),[a,p]=o.useState({});o.useEffect(()=>{if(!c()){d("/become-host");return}},[c,d]);const T=["Electronics & Gadgets","Camera & Photography","Audio & Music","Sports & Fitness","Outdoor & Adventure","Transportation","Tools & Equipment","Party & Events","Gaming","Home & Garden","Fashion & Accessories","Books & Media","Other"],V=[{value:"hour",label:"Per Hour",description:"Ideal for short-term rentals"},{value:"day",label:"Per Day",description:"Most common pricing model"},{value:"week",label:"Per Week",description:"For longer rentals"}],B=[{value:"percent",label:"Percentage",description:"Percentage of total cost"},{value:"flat",label:"Fixed Amount",description:"Fixed deposit amount"}],g=[{id:1,title:"Basic Info",icon:U},{id:2,title:"Pricing",icon:k},{id:3,title:"Images",icon:H},{id:4,title:"Details",icon:Z},{id:5,title:"Review",icon:P}],i=r=>{const{name:t,value:j,type:v,checked:N}=r.target;if(t.includes(".")){const[u,M]=t.split(".");x(w=>({...w,[u]:{...w[u],[M]:v==="checkbox"?N:j}}))}else x(u=>({...u,[t]:v==="checkbox"?N:j}));a[t]&&p(u=>({...u,[t]:null}))},I=r=>{x(t=>({...t,images:r})),a.images&&p(t=>({...t,images:null}))},f=r=>{const t={};switch(r){case 1:s.title.trim()||(t.title="Title is required"),s.description.trim()||(t.description="Description is required"),s.category||(t.category="Category is required"),s.category==="Other"&&!s.customCategory.trim()&&(t.customCategory="Custom category is required"),s.location.trim()||(t.location="Location is required");break;case 2:(!s.basePrice||s.basePrice<=0)&&(t.basePrice="Valid price is required"),(!s.totalQuantity||s.totalQuantity<=0)&&(t.totalQuantity="Valid quantity is required"),(!s.depositValue||s.depositValue<0)&&(t.depositValue="Valid deposit is required"),s.depositType==="percent"&&s.depositValue>100&&(t.depositValue="Percentage cannot exceed 100%");break;case 3:s.images.length===0&&(t.images="At least one image is required");break}return p(t),Object.keys(t).length===0},E=()=>{f(l)&&h(r=>Math.min(r+1,5))},S=()=>{h(r=>Math.max(r-1,1))},L=async()=>{if(f(4)){b(!0);try{const r={...s,category:s.category==="Other"?s.customCategory:s.category,basePrice:parseFloat(s.basePrice),depositValue:parseFloat(s.depositValue),totalQuantity:parseInt(s.totalQuantity),policies:{...s.policies,minimumBookingPeriod:parseInt(s.policies.minimumBookingPeriod),maximumBookingPeriod:parseInt(s.policies.maximumBookingPeriod)}};s.category!=="Other"&&delete r.customCategory;const t=await Q.createListing(r);if(t.success)C.success("Listing created successfully!"),d("/host/dashboard");else throw new Error(t.message||"Failed to create listing")}catch(r){console.error("Error creating listing:",r),C.error(r.message||"Failed to create listing")}finally{b(!1)}}},F=()=>{switch(l){case 1:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Listing Title *"}),e.jsx("input",{type:"text",name:"title",value:s.title,onChange:i,placeholder:"e.g., Canon DSLR Camera with Lens Kit",className:n("w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-500 focus:border-transparent",a.title&&"border-red-500")}),a.title&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),e.jsx("textarea",{name:"description",value:s.description,onChange:i,rows:4,placeholder:"Describe your item in detail...",className:n("w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-500 focus:border-transparent",a.description&&"border-red-500")}),a.description&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),e.jsxs("select",{name:"category",value:s.category,onChange:i,className:n("w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-500 focus:border-transparent",a.category&&"border-red-500"),children:[e.jsx("option",{value:"",children:"Select a category"}),T.map(r=>e.jsx("option",{value:r,children:r},r))]}),a.category&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.category})]}),s.category==="Other"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom Category *"}),e.jsx("input",{type:"text",name:"customCategory",value:s.customCategory,onChange:i,placeholder:"Enter custom category",className:n("w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-500 focus:border-transparent",a.customCategory&&"border-red-500")}),a.customCategory&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.customCategory})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location *"}),e.jsxs("div",{className:"relative",children:[e.jsx(R,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",name:"location",value:s.location,onChange:i,placeholder:"e.g., Mumbai, Maharashtra",className:n("w-full pl-10 pr-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-500 focus:border-transparent",a.location&&"border-red-500")})]}),a.location&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.location})]})]});case 2:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Base Price *"}),e.jsxs("div",{className:"relative",children:[e.jsx(k,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"number",name:"basePrice",value:s.basePrice,onChange:i,placeholder:"0",min:"1",step:"1",className:n("w-full pl-10 pr-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-500 focus:border-transparent",a.basePrice&&"border-red-500")})]}),a.basePrice&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.basePrice})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pricing Unit *"}),e.jsx("select",{name:"unitType",value:s.unitType,onChange:i,className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:V.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity Available *"}),e.jsx("input",{type:"number",name:"totalQuantity",value:s.totalQuantity,onChange:i,placeholder:"1",min:"1",className:n("w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-500 focus:border-transparent",a.totalQuantity&&"border-red-500")}),a.totalQuantity&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.totalQuantity})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deposit Type *"}),e.jsx("select",{name:"depositType",value:s.depositType,onChange:i,className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:B.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deposit Value *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",name:"depositValue",value:s.depositValue,onChange:i,placeholder:"20",min:"0",max:s.depositType==="percent"?"100":void 0,className:n("w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-500 focus:border-transparent",a.depositValue&&"border-red-500")}),e.jsx("div",{className:"absolute right-3 top-3 text-gray-500 text-sm",children:s.depositType==="percent"?"%":"₹"})]}),a.depositValue&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.depositValue})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Pricing Preview"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Base Price:"}),e.jsxs("span",{children:["₹",s.basePrice||0,"/",s.unitType]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Deposit:"}),e.jsx("span",{children:s.depositType==="percent"?`${s.depositValue||0}% of total`:`₹${s.depositValue||0}`})]})]})]})]});case 3:return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Upload Images"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Add high-quality images to showcase your item. The first image will be the primary image."}),e.jsx(O,{images:s.images,onImagesChange:I,maxImages:10}),a.images&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:a.images})]})});case 4:return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Booking Policies"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Booking Period"}),e.jsxs("select",{name:"policies.minimumBookingPeriod",value:s.policies.minimumBookingPeriod,onChange:i,className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsxs("option",{value:"1",children:["1 ",s.unitType]}),e.jsxs("option",{value:"2",children:["2 ",s.unitType,"s"]}),e.jsxs("option",{value:"3",children:["3 ",s.unitType,"s"]}),e.jsx("option",{value:"7",children:"1 week"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Booking Period"}),e.jsxs("select",{name:"policies.maximumBookingPeriod",value:s.policies.maximumBookingPeriod,onChange:i,className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"7",children:"1 week"}),e.jsx("option",{value:"14",children:"2 weeks"}),e.jsx("option",{value:"30",children:"1 month"}),e.jsx("option",{value:"90",children:"3 months"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cancellation Policy"}),e.jsxs("select",{name:"policies.cancellationPolicy",value:s.policies.cancellationPolicy,onChange:i,className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"flexible",children:"Flexible - Full refund until 24h before"}),e.jsx("option",{value:"moderate",children:"Moderate - Full refund until 48h before"}),e.jsx("option",{value:"strict",children:"Strict - Full refund until 7 days before"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"policies.instantBooking",checked:s.policies.instantBooking,onChange:i,className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-2 text-sm text-gray-700",children:"Enable instant booking (no approval required)"})]})]})});case 5:return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Review Your Listing"}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:s.title}),e.jsxs("p",{className:"text-gray-600 text-sm",children:[s.category," • ",s.location]})]}),e.jsx("p",{className:"text-gray-700",children:s.description}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[e.jsxs("span",{className:"bg-primary-100 text-primary-800 px-2 py-1 rounded",children:["₹",s.basePrice,"/",s.unitType]}),e.jsxs("span",{className:"text-gray-600",children:[s.totalQuantity," available"]})]}),s.images.length>0&&e.jsx("div",{className:"grid grid-cols-4 gap-2",children:s.images.slice(0,4).map((r,t)=>e.jsx("img",{src:r.preview||r.url,alt:`Preview ${t+1}`,className:"w-full h-20 object-cover rounded"},t))})]})}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx(q,{className:"w-5 h-5 text-yellow-600 mt-0.5 mr-2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-yellow-800 font-medium",children:"Almost ready!"}),e.jsx("p",{className:"text-yellow-700 text-sm mt-1",children:"Your listing will be live once you submit it. You can always edit it later from your dashboard."})]})]})})]});default:return null}};return c()?e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Create New Listing"}),e.jsx("p",{className:"text-gray-600",children:"Share your item with the community and start earning"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex items-center justify-between",children:g.map((r,t)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:n("flex items-center justify-center w-10 h-10 rounded-full border-2 transition-colors duration-200",l>=r.id?"bg-primary-600 border-primary-600 text-white":"border-gray-300 text-gray-400"),children:l>r.id?e.jsx(P,{className:"w-6 h-6"}):e.jsx(r.icon,{className:"w-6 h-6"})}),t<g.length-1&&e.jsx("div",{className:n("w-full h-0.5 mx-4 transition-colors duration-200",l>r.id?"bg-primary-600":"bg-gray-300")})]},r.id))}),e.jsx("div",{className:"flex justify-between mt-2",children:g.map(r=>e.jsx("div",{className:"text-xs text-gray-600 text-center",children:r.title},r.id))})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-8",children:F()}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{onClick:S,disabled:l===1,className:n("px-6 py-3 rounded-lg font-medium transition-colors duration-200",l===1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Previous"}),l<5?e.jsx("button",{onClick:E,className:"px-6 py-3 bg-primary-600 text-white rounded-lg font-medium hover:bg-primary-700 transition-colors duration-200",children:"Next"}):e.jsx("button",{onClick:L,disabled:y,className:"px-6 py-3 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 disabled:bg-gray-400 transition-colors duration-200",children:y?"Creating...":"Create Listing"})]})]}):null};export{se as default};
