import{r as v,j as e,k as a,L as R,U as A,a as D,h as F,b as U,c as z}from"./index-76169fad.js";import{H as B,a as O}from"./HeartIcon-9271f9a0.js";import{M as Q}from"./MapPinIcon-dea18e68.js";import{f as _}from"./index-11ece73b.js";const W=({listing:i,onFavorite:n,isFavorited:w=!1,showHost:I=!0,size:c="medium"})=>{const[o,k]=v.useState(!1),[m,C]=v.useState(!1);if(!i)return null;const{_id:d,title:x,description:u,images:r,category:h,basePrice:L,unitType:g,location:f,totalQuantity:t,ownerId:S,status:j,averageRating:p,totalReviews:N,createdAt:b}=i,s=S||{},y=r&&r.length>0?r[0]:null,E=l=>{l.preventDefault(),l.stopPropagation(),n&&n(d)},M=()=>`${Number(L).toLocaleString("en-IN",{style:"currency",currency:"INR"})}/${g==="hour"?"hr":g==="day"?"day":"week"}`,T=()=>j==="disabled"?"Unavailable":t===0?"Out of stock":t===1?"1 available":`${t} available`,$=()=>j==="disabled"||t===0?"text-red-600":t<=2?"text-orange-600":"text-green-600",H={small:"w-full max-w-sm",medium:"w-full max-w-md",large:"w-full max-w-lg"},P={small:"h-48",medium:"h-56",large:"h-64"};return e.jsx("div",{className:a("bg-white rounded-xl shadow-md hover:shadow-lg transition-all duration-300 overflow-hidden group",H[c]),children:e.jsxs(R,{to:`/listings/${d}`,className:"block",children:[e.jsxs("div",{className:a("relative overflow-hidden",P[c]),children:[y?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:y,alt:x,className:a("w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",o?"opacity-100":"opacity-0"),onLoad:()=>k(!0),onError:()=>C(!0)}),!o&&!m&&e.jsx("div",{className:"absolute inset-0 bg-gray-200 animate-pulse flex items-center justify-center",children:e.jsx("div",{className:"text-gray-400",children:"Loading..."})}),m&&e.jsx("div",{className:"absolute inset-0 bg-gray-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-gray-400",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-lg mx-auto mb-2"}),e.jsx("p",{className:"text-sm",children:"No image"})]})})]}):e.jsx("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-gray-400",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-lg mx-auto mb-2"}),e.jsx("p",{className:"text-sm",children:"No image"})]})}),e.jsx("button",{onClick:E,className:"absolute top-3 right-3 p-2 bg-white/80 backdrop-blur-sm rounded-full hover:bg-white transition-colors duration-200 shadow-sm",children:w?e.jsx(B,{className:"w-5 h-5 text-red-500"}):e.jsx(O,{className:"w-5 h-5 text-gray-600 hover:text-red-500"})}),h&&e.jsx("div",{className:"absolute top-3 left-3 px-3 py-1 bg-primary-600 text-white text-sm font-medium rounded-full",children:h}),e.jsx("div",{className:"absolute bottom-3 left-3 px-2 py-1 bg-white/90 backdrop-blur-sm rounded-md",children:e.jsx("span",{className:a("text-sm font-medium",$()),children:T()})})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 line-clamp-1 mb-1",children:x}),u&&e.jsx("p",{className:"text-gray-600 text-sm line-clamp-2",children:u})]}),I&&s&&e.jsx("div",{className:"flex items-center mb-3 pb-3 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[s.profileImage?e.jsx("img",{src:s.profileImage,alt:s.name||s.displayName,className:"w-8 h-8 rounded-full object-cover"}):e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:e.jsx(A,{className:"w-4 h-4 text-gray-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.name||s.displayName||"Host"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[s.verified&&e.jsx(D,{className:"w-3 h-3 text-green-500"}),p&&e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"w-3 h-3 text-yellow-400 fill-current"}),e.jsxs("span",{className:"text-xs text-gray-600",children:[p.toFixed(1),N&&` (${N})`]})]})]})]})]})}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[f&&e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(Q,{className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"text-sm truncate",children:f})]}),b&&e.jsxs("div",{className:"flex items-center text-gray-500",children:[e.jsx(U,{className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"text-xs",children:_(new Date(b),"MMM yyyy")})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(z,{className:"w-5 h-5 text-green-600 mr-1"}),e.jsx("span",{className:"text-xl font-bold text-gray-900",children:M()})]}),e.jsx("button",{className:"px-4 py-2 bg-primary-600 text-white text-sm font-medium rounded-lg hover:bg-primary-700 transition-colors duration-200",children:"Book Now"})]})]})]})})};export{W as L};
